# Copyright (c) 2015 Davide Gessa
# Distributed under the MIT software license, see the accompanying
# file COPYING or http://www.opensource.org/licenses/mit-license.php.

import time
from libcontractvm import Wallet, ConsensusManager, DappManager

class ForvmManager (DappManager.DappManager):
    def __init__ (self, consensusManager, wallet = None):
        super (ForvmManager, self).__init__(consensusManager, wallet)

    def createPost (self, title, text):
        cid = self.produceTransaction('forvm.writenewpost', [title, text])
        return cid

    def listPosts(self):
        return self.consensusManager.jsonConsensusCall('forvm.listposts', [])['result']

    def commentPost(self, post_id, comment):
        cid = self.produceTransaction('forvm.commentpost', [post_id, comment])
        return cid
    def createPoll(self, title, choices, deadline):
        cid = self.produceTransaction('forvm.createpoll', [title, choices, deadline])
